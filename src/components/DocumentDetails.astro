---
import { Icon } from "@astrojs/starlight/components";

const { title, subTitle, docType, date, lastUpdated, externalParticipants, authors, reviewers, missingMembers, location, timeStart, timeEnd, isExternalUse, showLog, url, version } = Astro.props;
---

<section>
	<div class="title">
		<Icon name="information" size="2rem" />
		<h1 id="info-title">Informazioni sul documento</h1>
	</div>
	{isExternalUse && <p class="ext">Uso esterno</p>}
	<dl>
		{
				subTitle && (
				<>
					<dt class="taxonomy">Sommario</dt>
					<dd class="content">{subTitle}</dd>
				</>
			)
		}
		{
			version && (
				<>
					<dt class="taxonomy">Versione</dt>
					<dd class="content">{version}</dd>
				</>
			)
		}
		{
			authors && (
				<>
					<dt class="taxonomy">Autori</dt>
					<dd class="content">{authors.join(", ")}</dd>
				</>
			)
		}
		{
			reviewers && (
				<>
					<dt class="taxonomy">Verificatori</dt>
					<dd class="content">{reviewers.join(", ")}</dd>
				</>
			)
		}
		{
			date && (
				<>
					<dt class="taxonomy">Data</dt>
					<dd class="content">{new Date(date).toLocaleString("it-IT").split(", ")[0]}</dd>
				</>
			)
		}
		{
			lastUpdated && (
				<>
					<dt class="taxonomy">Ultimo aggiornamento</dt>
					<dd class="content">{new Date(lastUpdated).toLocaleString("it-IT").split(", ")[0]}</dd>
				</>
			)
		}
		{
			externalParticipants && (
				<>
					<dt class="taxonomy">Partecipanti esterni</dt>
					<dd class="content">{externalParticipants.join(", ")}</dd>
				</>
			)
		}
		{
			missingMembers && (
				<>
					<dt class="taxonomy">Assenti</dt>
					<dd class="content">{missingMembers.join(", ")}</dd>
				</>
			)
		}
		{
			location && (
				<>
					<dt class="taxonomy">Luogo</dt>
					<dd class="content">{location}</dd>
				</>
			)
		}
		{
			timeStart && (
				<>
					<dt class="taxonomy">Ora di inizio</dt>
					<dd class="content">{timeStart}</dd>
				</>
			)
		}
		{
			timeEnd && (
				<>
					<dt class="taxonomy">Ora di fine</dt>
					<dd class="content">{timeEnd}</dd>
				</>
			)
		}
	</dl>

	{
		url && (
			<>
				<div class="pdf-link">
					<Icon name="github" size="1em" />
					<a href={url} title="Documento PDF" target="_blank">
						Documento PDF disponibile su GitHub
					</a>
				</div>
			</>
		)
	}

</section>

<style>

	:root {
		--badge-text: var(--sl-color-text);
		--badge-bg: goldenrod;
	}

	:root[data-theme=dark] {
		--badge-text: var(--sl-color-bg);
		--badge-bg: goldenrod;
	}

	p.ext {
		width: fit-content;
		border-radius: 0.5rem;
		background-color: var(--badge-bg);
		padding: 0.5em 1em;
		color: var(--badge-text);
	}

	.subTitle {
		font-style: italic;
		margin-bottom: 2em;
	}

	.title {
		display: flex;
		gap: 1em;
		align-items: center;
	}

	h1#info-title {
		font-size: 1.3rem;
		margin-top: 0;
	}

	dl {
		display: grid;
		grid-template-columns: auto 1fr;
		align-items: baseline;
		gap: 1em;
	}

	dl > dt.taxonomy {
		margin-top: 0;
	}

	dl > dd.content {
		margin-top: 0;
		padding: 0;
	}

	.pdf-link {
		position: relative;
		display: flex;
		gap: 0.75em;
		border: 1px solid var(--sl-color-gray-5);
		border-radius: 0.5rem;
		box-shadow: var(--sl-shadow-sm);
		padding: 1rem;
	}

	.pdf-link a {
		text-decoration: none;
	}

	a::before {
		content: '';
		position: absolute;
		top: 0;
		right: 0;
		bottom: 0;
		left: 0;
	}

	.pdf-link:hover,
	.pdf-link:focus {
		background: var(--sl-color-gray-7, var(--sl-color-gray-6));
		border-color: var(--sl-color-gray-2);
	}

</style>
